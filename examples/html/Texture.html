
<head>
  <title>Texture</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans|Droid+Sans+Mono&subset=latin,greek-ext' rel='stylesheet' type='text/css'>
  <link href='examples.css' rel='stylesheet' type='text/css'>
</head>
<body>


<!--

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>ExampleGen</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>Curves</span><span class='hs-varop'>.</span><span class='hs-conid'>Geometry</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>Curves</span><span class='hs-varop'>.</span><span class='hs-conid'>Text</span><span class='hs-varop'>.</span><span class='hs-conid'>Fonts</span><span class='hs-varop'>.</span><span class='hs-conid'>Liberation</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>Curves</span><span class='hs-varop'>.</span><span class='hs-conid'>SVG</span><span class='hs-varop'>.</span><span class='hs-conid'>Font</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>Curves</span><span class='hs-varop'>.</span><span class='hs-conid'>Text</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Monoid</span>
</pre>
-->

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>Curves</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>NumInstances</span>
</pre>
<!--

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>w</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>120</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Int</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>h</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>120</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Int</span>
</pre>
-->

<h1>Textures</h1>

We have <a href=Basics.html>seen</a> how to fill a closed curve with a solid
colour using the <code><a href='../../dist/doc/html/curves/Graphics-Curves-Style.html#v:FillColour'>FillColour</a></code> attribute. The <code><a href='../../dist/doc/html/curves/Graphics-Curves-Style.html#v:Texture'>Texture</a></code> attribute lets you specify a fill colour parameterised by a
pixel coordinate and a texture coordinate. The texture coordinate is given
relative to a customizable texture basis.

<h2>Using the texture coordinate</h2>
First, let's have ourselves an invisible egg

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>egg</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>curve</span> <span class='hs-num'>0</span> <span class='hs-layout'>(</span><span class='hs-num'>2</span> <span class='hs-varop'>*</span> <span class='hs-varid'>pi</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>\</span><span class='hs-varid'>t</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Vec</span> <span class='hs-layout'>(</span><span class='hs-num'>0.8</span> <span class='hs-varop'>*</span> <span class='hs-varid'>cos</span> <span class='hs-varid'>t</span> <span class='hs-varop'>*</span> <span class='hs-layout'>(</span><span class='hs-num'>1</span> <span class='hs-comment'>-</span> <span class='hs-num'>0.12</span> <span class='hs-varop'>*</span> <span class='hs-varid'>sin</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>               <span class='hs-layout'>(</span><span class='hs-num'>0.95</span> <span class='hs-varop'>*</span> <span class='hs-varid'>sin</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>         <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>LineColour</span> <span class='hs-conop'>:=</span> <span class='hs-varid'>transparent</span> <span class='hs-keyglyph'>]</span>
</pre>
The rest of this page is dedicated to giving the egg pretty colours, but for
reference, this is what it looks like with the <code>LineColour</code> turned
back on.
<img title='' src="../images/texture-egg.png"/>

Let's have a red texture which is darker closer to the center of the egg and a
green texture that grows darker towards the bottom. Adding<a name="NumInstances-back"/><a class=footnote href="#NumInstances">1</a> them together produces a pretty yellow egg.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>redTex</span>   <span class='hs-keyword'>_</span> <span class='hs-varid'>p</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Colour</span> <span class='hs-layout'>(</span><span class='hs-varid'>distance</span> <span class='hs-varid'>p</span> <span class='hs-num'>0</span><span class='hs-layout'>)</span> <span class='hs-num'>0</span> <span class='hs-num'>0</span> <span class='hs-num'>1</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>greenTex</span> <span class='hs-keyword'>_</span> <span class='hs-varid'>p</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Colour</span> <span class='hs-num'>0</span> <span class='hs-layout'>(</span><span class='hs-num'>0.5</span> <span class='hs-varop'>+</span> <span class='hs-num'>0.5</span> <span class='hs-varop'>*</span> <span class='hs-varid'>getY</span> <span class='hs-varid'>p</span><span class='hs-layout'>)</span> <span class='hs-num'>0</span> <span class='hs-num'>1</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>redEgg</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>egg</span> <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>Texture</span> <span class='hs-conop'>:=</span> <span class='hs-varid'>redTex</span>   <span class='hs-keyglyph'>]</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>greenEgg</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>egg</span> <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>Texture</span> <span class='hs-conop'>:=</span> <span class='hs-varid'>greenTex</span> <span class='hs-keyglyph'>]</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>yellowEgg</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>egg</span> <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>Texture</span> <span class='hs-conop'>:=</span> <span class='hs-varid'>redTex</span> <span class='hs-varop'>+</span> <span class='hs-varid'>greenTex</span> <span class='hs-keyglyph'>]</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>eggs</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>redEgg</span> <span class='hs-varop'>&lt;&gt;</span> <span class='hs-varid'>translate</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-num'>2</span> <span class='hs-num'>0</span><span class='hs-layout'>)</span> <span class='hs-varid'>greenEgg</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>               <span class='hs-varop'>&lt;&gt;</span> <span class='hs-varid'>translate</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-num'>4</span> <span class='hs-num'>0</span><span class='hs-layout'>)</span> <span class='hs-varid'>yellowEgg</span>
</pre>
<img title='' src="../images/texture-eggs.png"/>

<p>
Texture coordinates are transformed together with the image, so the texture
sticks with an object when it's transformed as you would expect.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>tilt</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>rotate</span> <span class='hs-layout'>(</span><span class='hs-varid'>pi</span><span class='hs-varop'>/</span><span class='hs-num'>4</span><span class='hs-layout'>)</span> <span class='hs-varid'>yellowEgg</span>
</pre>
<img title='Humpty, no!' src="../images/texture2.png"/>

<h3>The TextureBasis</h3>

Texture coordinates are given in a customizable coordinate system defined by
the <code><a href='../../dist/doc/html/curves/Graphics-Curves-Style.html#v:TextureBasis'>TextureBasis</a></code> attribute of the image. A <code><a href='../../dist/doc/html/curves/Graphics-Curves-Math.html#t:Basis'>Basis</a></code>
consists of three points, (<code><a href='../../dist/doc/html/curves/Graphics-Curves-Math.html#v:origin'>origin</a></code>, <code><a href='../../dist/doc/html/curves/Graphics-Curves-Math.html#v:xUnit'>xUnit</a></code>, and
<code><a href='../../dist/doc/html/curves/Graphics-Curves.html#v:yUnit'>yUnit</a></code>) and describes a coordinate system with origin <code>origin</code>
and basis vectors <code>xUnit</code> <code>-</code> <code>origin</code> and <code>yUnit</code> <code>-</code> <code>origin</code> The
texture coordinate of a point <code>p</code> is <code>Vec</code> <code>s</code> <code>t</code>, where
<!--

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>prop_texcoord</span> <span class='hs-layout'>(</span><span class='hs-conid'>Basis</span> <span class='hs-varid'>origin</span> <span class='hs-varid'>xUnit</span> <span class='hs-varid'>yUnit</span><span class='hs-layout'>)</span> <span class='hs-varid'>p</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-varid'>s</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span>
</pre>
-->

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span>   <span class='hs-varid'>p</span> <span class='hs-varop'>==</span> <span class='hs-varid'>diag</span> <span class='hs-varid'>s</span> <span class='hs-varop'>*</span> <span class='hs-layout'>(</span><span class='hs-varid'>xUnit</span> <span class='hs-comment'>-</span> <span class='hs-varid'>origin</span><span class='hs-layout'>)</span> <span class='hs-varop'>+</span> <span class='hs-varid'>diag</span> <span class='hs-varid'>t</span> <span class='hs-varop'>*</span> <span class='hs-layout'>(</span><span class='hs-varid'>yUnit</span> <span class='hs-comment'>-</span> <span class='hs-varid'>origin</span><span class='hs-layout'>)</span>
</pre>
<!--

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>pt</span> <span class='hs-varid'>p</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>point</span> <span class='hs-varid'>p</span> <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>LineWidth</span> <span class='hs-conop'>:=</span> <span class='hs-num'>4</span> <span class='hs-keyglyph'>]</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>font</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>liberation</span> <span class='hs-conid'>Serif</span> <span class='hs-conid'>[]</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>str</span> <span class='hs-varid'>p</span> <span class='hs-varid'>s</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>label</span> <span class='hs-varid'>p</span> <span class='hs-num'>14</span> <span class='hs-varid'>s</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>   <span class='hs-comment'>-- translate p $ freezeImage 0 $ scale (diag h) $</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>   <span class='hs-comment'>-- drawString font s `with` [ LineColour := transparent, FillColour := black ]</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>basisExample</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mconcat</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyglyph'>[</span> <span class='hs-varid'>str</span> <span class='hs-layout'>(</span><span class='hs-varid'>xunit</span> <span class='hs-varop'>+</span> <span class='hs-conid'>Vec</span> <span class='hs-num'>15</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-num'>12</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span> <span class='hs-str'>"xUnit"</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>str</span> <span class='hs-layout'>(</span><span class='hs-varid'>yunit</span> <span class='hs-varop'>+</span> <span class='hs-conid'>Vec</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-num'>27</span><span class='hs-layout'>)</span> <span class='hs-num'>7</span><span class='hs-layout'>)</span> <span class='hs-str'>"yUnit"</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>str</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-conid'>Vec</span> <span class='hs-num'>8</span> <span class='hs-num'>6</span><span class='hs-layout'>)</span> <span class='hs-str'>"origin"</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>rotateAround</span> <span class='hs-varid'>tlabel</span> <span class='hs-layout'>(</span><span class='hs-varid'>angle</span> <span class='hs-varid'>unitX</span> <span class='hs-varid'>xunit</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span> <span class='hs-varid'>str</span> <span class='hs-varid'>tlabel</span> <span class='hs-str'>"s(xUnit - origin)"</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>str</span> <span class='hs-varid'>rlabel</span> <span class='hs-str'>"t(yUnit - origin)"</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>str</span> <span class='hs-layout'>(</span><span class='hs-varid'>p</span> <span class='hs-varop'>+</span> <span class='hs-conid'>Vec</span> <span class='hs-num'>12</span> <span class='hs-num'>6</span><span class='hs-layout'>)</span> <span class='hs-str'>"p"</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>arrow</span> <span class='hs-num'>0</span> <span class='hs-varid'>xunit</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>arrow</span> <span class='hs-num'>0</span> <span class='hs-varid'>yunit</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>mconcat</span>
<a name="line-11"></a><span class='hs-varop'>&gt;</span>     <span class='hs-keyglyph'>[</span> <span class='hs-varid'>line</span> <span class='hs-varid'>xunit</span> <span class='hs-layout'>(</span><span class='hs-varid'>xunit</span> <span class='hs-varop'>*</span> <span class='hs-varid'>diag</span> <span class='hs-varid'>s</span><span class='hs-layout'>)</span> <span class='hs-varop'>++&gt;</span> <span class='hs-varid'>p</span>
<a name="line-12"></a><span class='hs-varop'>&gt;</span>     <span class='hs-layout'>,</span> <span class='hs-varid'>line</span> <span class='hs-varid'>yunit</span> <span class='hs-layout'>(</span><span class='hs-varid'>yunit</span> <span class='hs-varop'>*</span> <span class='hs-varid'>diag</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span> <span class='hs-varop'>++&gt;</span> <span class='hs-varid'>p</span>
<a name="line-13"></a><span class='hs-varop'>&gt;</span>     <span class='hs-keyglyph'>]</span> <span class='hs-varop'>`with`</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>[</span><span class='hs-conid'>LineColour</span> <span class='hs-conop'>:=</span> <span class='hs-conid'>Colour</span> <span class='hs-num'>1</span> <span class='hs-num'>0.2</span> <span class='hs-num'>0.2</span> <span class='hs-num'>1</span><span class='hs-keyglyph'>]</span> <span class='hs-varop'>++</span> <span class='hs-varid'>dashedClosed</span> <span class='hs-num'>5</span> <span class='hs-num'>5</span><span class='hs-layout'>)</span>
<a name="line-14"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>pt</span> <span class='hs-varid'>p</span> <span class='hs-keyglyph'>]</span>
<a name="line-15"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyword'>where</span>
<a name="line-16"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>rlabel</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-layout'>(</span><span class='hs-varid'>p</span> <span class='hs-varop'>+</span> <span class='hs-varid'>xunit</span> <span class='hs-varop'>*</span> <span class='hs-varid'>diag</span> <span class='hs-varid'>s</span><span class='hs-layout'>)</span><span class='hs-varop'>/</span><span class='hs-num'>2</span> <span class='hs-varop'>+</span> <span class='hs-conid'>Vec</span> <span class='hs-num'>65</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-num'>5</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-17"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>tlabel</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-layout'>(</span><span class='hs-varid'>p</span> <span class='hs-varop'>+</span> <span class='hs-varid'>yunit</span> <span class='hs-varop'>*</span> <span class='hs-varid'>diag</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span><span class='hs-varop'>/</span><span class='hs-num'>2</span> <span class='hs-varop'>+</span> <span class='hs-conid'>Vec</span> <span class='hs-num'>0</span> <span class='hs-num'>14</span><span class='hs-layout'>)</span>
<a name="line-18"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>xunit</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Vec</span> <span class='hs-num'>100</span> <span class='hs-num'>20</span>
<a name="line-19"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>yunit</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Vec</span> <span class='hs-num'>30</span> <span class='hs-num'>90</span>
<a name="line-20"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Basis</span> <span class='hs-num'>0</span> <span class='hs-varid'>xunit</span> <span class='hs-varid'>yunit</span>
<a name="line-21"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>s</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>1.4</span>
<a name="line-22"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>t</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>1.2</span>
<a name="line-23"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>p</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromBasis</span> <span class='hs-varid'>b</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-varid'>s</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span>
</pre>
-->
In picture form:
<img title='' src="../images/texture-basis.png"/>

The <code><a href='../../dist/doc/html/curves/Graphics-Curves-Math.html#v:toBasis'>toBasis</a></code> and <code><a href='../../dist/doc/html/curves/Graphics-Curves-Math.html#v:fromBasis'>fromBasis</a></code> functions lets you
convert between points in the <code><a href='../../dist/doc/html/curves/Graphics-Curves-Math.html#v:defaultBasis'>defaultBasis</a></code> and an arbitrary
basis.

<p>
With the theory out of the way, let's mess with the egg. Modifying the texture
basis in effect applies the corresponding transformation to the texture. For
instance, we can turn the egg texture upside down and move it slightly
off-center as follows:

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>upsideDown</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>yellowEgg</span> <span class='hs-varop'>`with`</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyglyph'>[</span> <span class='hs-conid'>TextureBasis</span> <span class='hs-conop'>:~</span> <span class='hs-varid'>translate</span> <span class='hs-num'>0.2</span> <span class='hs-varop'>.</span> <span class='hs-varid'>rotate</span> <span class='hs-varid'>pi</span> <span class='hs-keyglyph'>]</span>
</pre>
<img title='' src="../images/texture3.png"/>

When an image is transformed, the texture basis is also transformed<a name="basis-transform-back"/><a class=footnote href="#basis-transform">2</a>. This is true even if we haven't set a texture for the
object, which can lead to slightly surprising behaviour in cases. Compare the
two balls below

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>scaled</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-varid'>ball1</span> <span class='hs-num'>2</span> <span class='hs-varop'>&lt;&gt;</span> <span class='hs-varid'>translate</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-num'>4.3</span> <span class='hs-num'>0</span><span class='hs-layout'>)</span> <span class='hs-varid'>ball2</span> <span class='hs-num'>2</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>           <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>Texture</span>    <span class='hs-conop'>:=</span> <span class='hs-varid'>redTex</span> <span class='hs-varop'>+</span> <span class='hs-varid'>greenTex</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>                  <span class='hs-layout'>,</span> <span class='hs-conid'>LineColour</span> <span class='hs-conop'>:=</span> <span class='hs-varid'>transparent</span> <span class='hs-keyglyph'>]</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyword'>where</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>ball1</span> <span class='hs-varid'>r</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>curve</span> <span class='hs-num'>0</span> <span class='hs-layout'>(</span><span class='hs-num'>2</span> <span class='hs-varop'>*</span> <span class='hs-varid'>pi</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>t</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Vec</span> <span class='hs-layout'>(</span><span class='hs-varid'>r</span> <span class='hs-varop'>*</span> <span class='hs-varid'>cos</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-varid'>r</span> <span class='hs-varop'>*</span> <span class='hs-varid'>sin</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>ball2</span> <span class='hs-varid'>r</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>scale</span> <span class='hs-varid'>r</span> <span class='hs-layout'>(</span><span class='hs-varid'>ball1</span> <span class='hs-num'>1</span><span class='hs-layout'>)</span>
</pre>
<img title='' src="../images/texture-scaled.png"/>

The left ball is drawn as a circle with radius two using <code><a href='../../dist/doc/html/curves/Graphics-Curves.html#v:curve'>curve</a></code>,
and the the right ball is circle with radius one scaled by a factor of two. The
difference between the two is that the the left ball has the default texture
basis and the right one a scaled-up basis. Of course, you can always reset the
texture basis of an object if it isn't what you want.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>scaled'</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>scaled</span> <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>TextureBasis</span> <span class='hs-conop'>:=</span> <span class='hs-varid'>newBasis</span> <span class='hs-keyglyph'>]</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyword'>where</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>     <span class='hs-varid'>newBasis</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>translate</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-num'>2.15</span> <span class='hs-num'>0</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span> <span class='hs-varid'>scale</span> <span class='hs-num'>3</span> <span class='hs-varid'>defaultBasis</span>
</pre>
<img title='' src="../images/texture-scaled2.png"/>

<h2>Using the pixel coordinate</h2>
The pixel coordinate can be used to create raster effects:

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>ex4</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>egg</span> <span class='hs-varop'>`with`</span> <span class='hs-keyglyph'>[</span> <span class='hs-conid'>Texture</span> <span class='hs-conop'>:=</span> <span class='hs-keyglyph'>\</span><span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-varid'>x</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span> <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>                     <span class='hs-keyword'>if</span> <span class='hs-varid'>even</span> <span class='hs-layout'>(</span><span class='hs-varid'>floor</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-varop'>/</span> <span class='hs-num'>10</span><span class='hs-layout'>)</span> <span class='hs-varop'>+</span> <span class='hs-varid'>floor</span> <span class='hs-layout'>(</span><span class='hs-varid'>y</span> <span class='hs-varop'>/</span> <span class='hs-num'>10</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>                     <span class='hs-keyword'>then</span> <span class='hs-conid'>Colour</span> <span class='hs-num'>1</span>   <span class='hs-num'>0</span> <span class='hs-num'>0</span> <span class='hs-num'>1</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>                     <span class='hs-keyword'>else</span> <span class='hs-conid'>Colour</span> <span class='hs-num'>0.5</span> <span class='hs-num'>0</span> <span class='hs-num'>0</span> <span class='hs-num'>1</span> <span class='hs-keyglyph'>]</span>
</pre>
<img title='' src="../images/texture4.png"/>

Transforming the image has no effect on the pixel coordinates:

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>ex5</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ex4</span> <span class='hs-varop'>&lt;&gt;</span> <span class='hs-varid'>translate</span> <span class='hs-layout'>(</span><span class='hs-conid'>Vec</span> <span class='hs-num'>1</span> <span class='hs-num'>0</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-varid'>rotate</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-varid'>pi</span><span class='hs-varop'>/</span><span class='hs-num'>4</span><span class='hs-layout'>)</span> <span class='hs-varid'>ex4</span><span class='hs-layout'>)</span>
</pre>
<img title='' src="../images/texture5.png"/>

<h2>FillColour and Texture interaction</h2>
The <code>FillColour</code> and <code>Texture</code> attributes map to the same
underlying property. In fact setting the fill colour is (almost<a name="almost-back"/><a class=footnote href="#almost">3</a>) equivalent to setting the texture to a constant function.  This means
that you can change the texture of an image by modifying the fill colour.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>purpleEgg</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>yellowEgg</span> <span class='hs-varop'>`with`</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>         <span class='hs-keyglyph'>[</span> <span class='hs-conid'>FillColour</span> <span class='hs-conop'>:~</span> <span class='hs-keyglyph'>\</span><span class='hs-layout'>(</span><span class='hs-conid'>Colour</span> <span class='hs-varid'>r</span> <span class='hs-varid'>g</span> <span class='hs-varid'>b</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Colour</span> <span class='hs-varid'>g</span> <span class='hs-varid'>b</span> <span class='hs-varid'>r</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>]</span>
</pre>
<img title='' src="../images/texture6.png"/>

<hr>

<div class=footnotes>

<p><a name="NumInstances"/>
<a class=footnote href="#NumInstances-back">▲ 1</a>

Thanks to Conal Elliott's nifty <a
href="http://hackage.haskell.org/package/NumInstances">NumInstances</a>
package.

<p><a name="basis-transform"/>
<a class=footnote href="#basis-transform-back">▲ 2</a>

This is what lets the texture stay with an object when it is transformed.

<p><a name="almost"/>
<a class=footnote href="#almost-back">▲ 3</a>

The only difference is that if the fill colour is set to transparent, the fill
blur is not taken into account when computing the bounds of an image. Of
course, if the texture attribute is set we can't decide<a name="well-back"/><a class=footnote href="#well">4</a> if
it's the constant transparent function.

<p><a name="well"/>
<a class=footnote href="#well-back">▲ 4</a>

Well I guess we could, since there are a finite<a name="lots-back"/><a class=footnote href="#lots">5</a> number of
texture function inputs. It would just take a while.

<p><a name="lots"/>
<a class=footnote href="#lots-back">▲ 5</a>

115792089237316195423570985008687907853269984665640564039457584007913129639936
 to be precise.
</div>

</body></html>
